#include <bin_splitter.hpp>
#include <vector>
#include <iostream>

int main(int argc, char const *argv[])
{
    std::vector<std::vector<double>> data;
    data.push_back(std::vector<double>{//mz1
        16.001444 , 66.26877  , 43.51064  , 10.108259 ,  6.303769 ,
        75.77314  , 35.291172 , 33.241913 , 44.848923 , 66.38294  ,
        14.367381 , 42.294537 , 18.534431 , 11.953842 , 33.017025 ,
        39.973156 , 39.995968 , 64.813034 , 46.080444 , 44.10389  ,
        86.17999  , 40.614613 , 16.452938 , 37.681114 ,  7.0012455,
        27.72836  , 56.40073  , 12.061732 , 43.195698 , 39.78275  ,
        20.842283 , 54.560226 , 31.976854 , 46.569267 , 31.136023 ,
        37.0275   , 17.946161 , 12.895749 , 26.652409 , 56.405964 ,
        26.878372 , 25.09776  ,  9.453476 , 36.11288  , 10.72391  ,
        12.818909 , 36.899517 , 24.96432  , 30.50684  , 62.089058 ,
        8.21309  , 38.599663 , 32.863575 , 20.329    , 15.734474 ,
        56.672382 , 32.591095 , 19.695414 , 25.270811 , 13.657359 ,
        50.504192 , 36.333984 , 80.395935 , 34.55553  , 23.208822 ,
        20.96432  , 44.701653 , 52.10765  , 20.902782 , 74.1305   ,
        21.165045 , 65.04779  , 56.040623 , 21.312038 ,  6.977107 ,
        11.521784 , 34.03863  , 12.090007 , 18.247622 , 15.811101 ,
        16.052692 ,  7.364551 , 11.634201 , 14.465022 ,  8.944995 ,
        18.23633  , 69.6471   , 25.304459 , 24.596258 , 33.103767 ,
        18.480103 , 12.129306 , 26.860428 , 29.17628  , 16.785963 ,
        53.744305 , 19.872747 , 61.0368   , 22.707546 , 27.915632
    });
    data.push_back(std::vector<double>{//mz2
        8.61819  , 19.501034 , 13.79103  ,  9.487399 ,  5.0890036,
        16.629208 ,  8.06349  ,  6.066437 , 14.270653 , 32.885563 ,
        4.1278067,  4.068799 ,  6.214475 ,  5.6444364,  4.8927355,
        17.726578 , 19.691528 ,  9.792604 , 14.747313 , 16.495834 ,
        4.544712 , 27.18657  , 13.066366 , 10.891781 ,  6.180136 ,
        4.8851   ,  4.086111 ,  7.0508013, 30.370693 , 24.967962 ,
        7.074524 , 15.143676 , 23.332438 ,  6.3156304, 30.401957 ,
        8.6881695,  9.21181  ,  7.1082   ,  8.455252 ,  8.318307 ,
        8.687068 , 10.455642 ,  5.9847646,  9.01186  ,  9.226638 ,
        12.0616665, 24.226276 ,  9.342592 , 16.84918  , 12.666266 ,
        6.010547 , 16.11413  , 23.810646 ,  6.4302053,  7.648484 ,
        7.358393 , 15.404733 ,  6.858499 , 11.798899 ,  5.0116553,
        13.484709 ,  7.708468 , 14.870897 ,  7.1101217,  7.602085 ,
        7.5827346, 19.131308 , 21.567692 , 14.370816 , 12.910904 ,
        4.262864 ,  6.345344 ,  4.0519705, 11.1516905,  4.4666986,
        8.750086 , 20.075775 ,  4.589394 ,  4.4751267,  5.7589993,
        4.519669 ,  5.821335 ,  4.1369762,  7.994674 ,  4.9958334,
        10.116229 , 35.97079  , 18.632248 ,  4.8617306, 22.881428 ,
        5.3564863,  5.3085585, 21.54062  ,  7.392768 , 11.858595 ,
        19.355362 , 14.301087 ,  8.957904 , 16.323738 ,  4.547914
    });
    data.push_back(std::vector<double>{//costheta1
        -0.83794636, -0.0463429 ,  0.21977718, -0.22660728, -0.45066792,
        0.980905  ,  0.87315017, -0.9473865 ,  0.02567548, -0.9450615 ,
        0.7479217 , -0.37620252,  0.5855599 ,  0.92598414, -0.64762276,
        0.24417922,  0.1484395 , -0.9068519 , -0.49858794, -0.52830964,
        0.02062959,  0.6745415 , -0.9539455 , -0.7924287 , -0.40114623,
        -0.43184486,  0.5130195 ,  0.07595298,  0.3881162 ,  0.6244915 ,
        0.5470561 ,  0.94692284,  0.7518163 , -0.9690341 ,  0.80893767,
        -0.8888047 , -0.6897321 ,  0.652079  , -0.76183665, -0.8394156 ,
        0.7788697 , -0.6072804 , -0.57890904,  0.953845  ,  0.5755758 ,
        0.34529006, -0.89752936, -0.5299369 ,  0.4284529 ,  0.6646887 ,
        -0.25434703, -0.9465345 ,  0.94195443,  0.9884761 , -0.71130854,
        -0.08392301,  0.64332825, -0.14080147,  0.50165004, -0.26826206,
        0.0280865 ,  0.68636364, -0.15115477, -0.6921989 , -0.6563091 ,
        0.979207  , -0.9160718 ,  0.06080004,  0.5418736 ,  0.73494154,
        -0.6826293 , -0.53364825,  0.9691033 , -0.6033958 ,  0.9906606 ,
        0.47348538,  0.6866978 ,  0.5638602 , -0.22463824,  0.6265411 ,
        -0.70328456,  0.38641444, -0.8736441 ,  0.98227423,  0.20825294,
        0.848946  ,  0.20490819,  0.81223214,  0.8820702 ,  0.671476  ,
        -0.9014292 ,  0.72217536,  0.6767591 ,  0.88563484,  0.72716564,
        -0.5131096 ,  0.35440704, -0.35877213, -0.9117404 ,  0.37895146
    });
    data.push_back(std::vector<double>{//costheta2
        -0.93043315,  0.03747476,  0.86389387,  0.11242257, -0.885876  ,
        -0.93628204,  0.33016196, -0.34246567,  0.31180766,  0.6339834 ,
        -0.8600483 ,  0.71469635,  0.686115  , -0.9845853 ,  0.23461807,
        -0.6074043 ,  0.9364356 ,  0.86832005,  0.71506965, -0.9075277 ,
        -0.42223665, -0.5149868 , -0.15094589, -0.9419446 , -0.70522994,
        0.6368992 ,  0.8268812 ,  0.58095837,  0.88951737,  0.25178313,
        -0.80202365,  0.8146062 , -0.1707375 ,  0.3753372 , -0.7207248 ,
        -0.0812124 , -0.23469318, -0.46299946, -0.74883443, -0.19599693,
        0.2214827 , -0.08487932,  0.30680814,  0.8181581 ,  0.7588524 ,
        0.8129122 , -0.56286705, -0.7131081 , -0.23098867,  0.7889794 ,
        0.99392194, -0.8505115 , -0.977797  , -0.591905  ,  0.6752653 ,
        -0.7907296 , -0.8433875 ,  0.42548177, -0.18895175, -0.271216  ,
        -0.44659463,  0.16060884, -0.4988955 ,  0.66446453,  0.8893286 ,
        0.3158809 , -0.7612186 ,  0.8195536 ,  0.01228803, -0.5281392 ,
        -0.08972429, -0.97887486,  0.77491874,  0.90404063,  0.7320292 ,
        -0.88790834, -0.5991999 ,  0.33638108, -0.4489677 , -0.43773553,
        -0.07446975, -0.97927165, -0.22711669, -0.61568475,  0.51429456,
        -0.37649566,  0.6493602 ,  0.84970284, -0.8382538 , -0.99906886,
        -0.8070892 , -0.8165911 , -0.17355558,  0.24979448, -0.18213324,
        -0.773796  , -0.4239362 , -0.8556878 , -0.8450165 ,  0.65267015
    });
    data.push_back(std::vector<double>{//Phi
        2.6715343 ,  2.7730315 , -2.5204384 , -2.3984575 ,  1.1609064 ,
        2.9213948 ,  1.371193  ,  0.8750693 ,  0.03863529,  1.6218885 ,
        2.5838304 , -1.8224179 , -1.5782694 , -2.4690833 , -0.19388288,
        -0.92971873,  2.5343206 , -1.5456591 , -2.418245  ,  2.5373404 ,
        2.1877089 ,  2.8607097 ,  1.388246  ,  0.1648144 , -0.8795119 ,
        0.04791092,  0.3281197 , -0.46792206,  1.0025247 , -2.8002515 ,
        0.70580053, -2.194483  ,  0.66144943, -1.2817874 ,  0.16924918,
        2.9397938 ,  0.07770538, -3.1304955 ,  2.2883859 , -2.7573934 ,
        -2.9919238 , -2.9331179 , -2.87177   ,  1.1448886 ,  0.20362444,
        -0.82251483,  0.18291123, -0.4134765 , -2.6009264 , -2.67821   ,
        -1.4489486 , -0.07787643, -2.7544057 , -2.1868908 , -1.964742  ,
        -2.6292758 , -0.69975144, -0.360865  , -0.5438303 , -2.9661205 ,
        2.7542439 , -1.3762461 , -3.0745475 , -0.6899398 , -0.43981287,
        -0.28529853,  3.0591307 , -1.0673229 , -2.817074  ,  1.1720062 ,
        -2.816685  ,  1.4879533 ,  1.3131933 ,  2.668508  , -1.0358943 ,
        -3.0299778 , -1.9355059 , -0.61179495, -0.06860263,  1.4149008 ,
        2.7052724 ,  0.7761517 , -3.1064193 ,  2.6051385 , -0.77700615,
        0.9415128 , -1.9596512 , -1.377044  ,  2.6031008 , -1.2936716 ,
        -1.893599  ,  2.781245  , -0.3536734 ,  0.69621587,  1.7578026 ,
        -0.75223476,  2.3533814 , -1.5526003 , -2.3151505 , -0.6075912
    });

    std::vector<std::vector<std::vector<double>>> data2;
    
    data2.push_back(data);
    data2.push_back(data);

    std::vector<std::vector<double>> weight;
    weight.push_back(
        std::vector<double>{
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01, 0.01,
        0.01
    });
    weight.push_back(
        std::vector<double>{
        3.10182431e-04, 1.04844872e-03, 1.73654509e-04, 4.30806496e-02,
        3.00352952e-02, 7.61357784e-06, 4.98560554e-04, 4.13771126e-04,
        4.65922419e-03, 1.17619409e-05, 5.08559217e-03, 2.84226525e-03,
        4.62593469e-03, 9.44018781e-05, 9.04014746e-03, 3.19074575e-04,
        5.18618948e-05, 2.10951228e-05, 1.74037623e-04, 5.91478643e-05,
        1.56202678e-03, 8.69289477e-05, 3.87651529e-04, 2.33708942e-05,
        5.06798481e-02, 9.56726107e-03, 8.69112024e-04, 3.94389475e-02,
        2.15780563e-05, 2.59007614e-04, 2.38770330e-03, 1.65249019e-05,
        2.23884027e-04, 1.22151038e-04, 5.19465756e-05, 5.34455034e-04,
        6.89731611e-03, 1.76793057e-02, 6.30603541e-04, 3.65118527e-04,
        2.17388879e-03, 4.71551237e-03, 8.40714176e-02, 3.35668889e-05,
        6.28626274e-03, 2.68923369e-03, 2.42206709e-05, 1.51102363e-03,
        1.39071748e-03, 8.93030587e-05, 9.25510616e-04, 5.63801179e-06,
        2.76261468e-06, 1.29105403e-04, 3.26775931e-03, 6.34193202e-04,
        1.40200460e-04, 3.07345818e-02, 3.57633941e-03, 2.18498766e-01,
        1.17243465e-03, 1.36840525e-03, 4.78665786e-04, 1.03188727e-03,
        7.02695128e-04, 2.67608181e-04, 2.81059345e-05, 6.31367648e-05,
        4.47640229e-03, 8.58187267e-05, 2.55730168e-02, 3.35713385e-05,
        6.11171748e-05, 3.35095936e-04, 1.15172036e-03, 3.29146489e-03,
        1.34349087e-04, 6.37436062e-02, 9.06313241e-02, 1.17351395e-02,
        3.35894358e-02, 3.61896745e-03, 2.46052814e-02, 2.33909942e-04,
        1.11107014e-01, 1.48694051e-03, 3.67086237e-05, 5.93650894e-05,
        6.08898202e-04, 4.86867025e-06, 9.16585896e-04, 6.61948861e-03,
        6.20660847e-04, 9.43908270e-04, 2.40058408e-03, 5.22519610e-05,
        2.78590182e-03, 1.52149445e-04, 6.04905988e-05, 8.47355715e-03
    });

    bin_splitter b = bin_splitter(
        data2,
        weight
    );

    std::cout << b.getData(0) << std::endl << std::endl;
    std::cout << b.getData(1) << std::endl << std::endl;

    b.split(
        10,
        20,
        1
    );

    return 0;
}
